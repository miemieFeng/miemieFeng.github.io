{
    "version": "https://jsonfeed.org/version/1",
    "title": "咩咩君 • All posts by \"前端\" tag",
    "description": "coding日常",
    "home_page_url": "http://miemieFeng.github.io",
    "items": [
        {
            "id": "http://miemiefeng.github.io/layui%E4%BD%BF%E7%94%A8%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E5%B9%B6%E5%9B%9E%E6%98%BE/",
            "url": "http://miemiefeng.github.io/layui%E4%BD%BF%E7%94%A8%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E5%B9%B6%E5%9B%9E%E6%98%BE/",
            "title": "layui使用富文本编辑器并回显",
            "date_published": "2022-01-21T08:34:39.000Z",
            "content_html": "<blockquote>\n<p>正好要做一个文章管理，记录一下遇到的坑</p>\n</blockquote>\n<p>1. 引入富文本编辑器</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var layedit = layui.layedit;</span><br><span class=\"line\">layedit.set(&#123;</span><br><span class=\"line\">\tuploadImage: &#123;</span><br><span class=\"line\">\t\turl: &#x27;/v1/openApi/uploadImage&#x27; //接口url</span><br><span class=\"line\">\t\t,type: &#x27;&#x27; //默认post</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">var index = layedit.build(&#x27;demo&#x27;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>这里我接入了图片上传</p>\n</blockquote>\n<p><strong>图片上传需要定义好接口</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;code&quot;: 0 //0表示成功，其它失败</span><br><span class=\"line\">  ,&quot;msg&quot;: &quot;&quot; //提示信息 //一般上传失败后返回</span><br><span class=\"line\">  ,&quot;data&quot;: &#123;</span><br><span class=\"line\">    &quot;src&quot;: &quot;图片路径&quot;</span><br><span class=\"line\">    ,&quot;title&quot;: &quot;图片名称&quot; //可选</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2. 富文本编辑器回显</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;textarea id=&quot;demo&quot; style=&quot;display: none;&quot; name=&quot;article&quot; autocomplete=&quot;off&quot; placeholder=&quot;内容&quot; th:text=&quot;*&#123;article&#125;&quot; &gt;&lt;/textarea&gt;</span><br></pre></td></tr></table></figure>\n<p>这里我使用了 th:text</p>\n<p>3. 最终效果<br>\n<img data-src=\"https://cdn.jsdelivr.net/gh/miemieFeng/blogImg/Blogs/20221116193413.png\" alt=\"20221116193413\"></p>\n",
            "tags": [
                "前端"
            ]
        },
        {
            "id": "http://miemiefeng.github.io/uni-app%E5%B0%81%E8%A3%85%E5%85%AC%E5%85%B1%E8%AF%B7%E6%B1%82(%E6%90%BA%E5%B8%A6token)/",
            "url": "http://miemiefeng.github.io/uni-app%E5%B0%81%E8%A3%85%E5%85%AC%E5%85%B1%E8%AF%B7%E6%B1%82(%E6%90%BA%E5%B8%A6token)/",
            "title": "uni-app封装公共请求(携带token)",
            "date_published": "2021-12-24T05:21:40.000Z",
            "content_html": "<blockquote>\n<p>在日常开发过程中，一般请求我们都会携带 token, 以保证安全性</p>\n</blockquote>\n<h3 id=\"1-在工程目录下新建个common文件夹\"><a class=\"markdownIt-Anchor\" href=\"#1-在工程目录下新建个common文件夹\">#</a> 1、在工程目录下新建个 common 文件夹</h3>\n<p>在 common 目录下新增 request.js</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//请求函数</span><br><span class=\"line\">const request = (url = &#x27;&#x27;, data = &#123;&#125;,type = &#x27;POST&#x27;, header = &#123;&#125;) =&gt; &#123;</span><br><span class=\"line\">\t// 缓存中获取token </span><br><span class=\"line\">\t header.token = data.token? data.token:uni.getStorageSync(&#x27;token&#x27;);</span><br><span class=\"line\">\t //请求地址</span><br><span class=\"line\">\t var baseUrl =  &#x27;http://localhost:9001/v1/openApi/&#x27;;  </span><br><span class=\"line\">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class=\"line\">        uni.request(&#123;</span><br><span class=\"line\">            method: type,</span><br><span class=\"line\">            url: baseUrl +url,</span><br><span class=\"line\">            data: data,</span><br><span class=\"line\">            header: header,</span><br><span class=\"line\">            dataType: &#x27;json&#x27;,        </span><br><span class=\"line\">        &#125;).then((response) =&gt; &#123;</span><br><span class=\"line\">            uni.hideLoading();</span><br><span class=\"line\">            uni.stopPullDownRefresh();</span><br><span class=\"line\">            let [error, res] = response;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\tconsole.log(res,&#x27;res&#x27;);</span><br><span class=\"line\">            if(res.data.code == 200)&#123;</span><br><span class=\"line\">                setTimeout(function () &#123;</span><br><span class=\"line\">                    resolve(res.data);</span><br><span class=\"line\">                &#125;, 1000);</span><br><span class=\"line\">            &#125;else if(res.data.code == 401)&#123;   //token失效时重新登录</span><br><span class=\"line\">                uni.showToast(&#123;</span><br><span class=\"line\">                    title:res.data.msg,</span><br><span class=\"line\">                    image:&#x27;../../static/public/close.png&#x27;,</span><br><span class=\"line\">                    duration: 2000,</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">\t\t\t\tsetTimeout(function()&#123;</span><br><span class=\"line\">\t\t\t\t\tuni.navigateTo(&#123;</span><br><span class=\"line\">\t\t\t\t\t    url: &#x27;/pages/login/login_vfcode&#x27;,</span><br><span class=\"line\">\t\t\t\t\t\tcomplete(e)&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tconsole.log(e,&#x27;eeeeeeeeee&#x27;)</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t&#125;);</span><br><span class=\"line\">\t\t\t\t&#125;,1000);</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">            &#125; else if(res.data.code == -100)&#123;   //-100时返回处理</span><br><span class=\"line\">\t\t\tuni.showToast(&#123;</span><br><span class=\"line\">\t\t\t    title:res.data.msg,</span><br><span class=\"line\">\t\t\t    duration: 1000,</span><br><span class=\"line\">\t\t\t&#125;);</span><br><span class=\"line\">\t\t\tsetTimeout(function () &#123;</span><br><span class=\"line\">\t\t\t\t//回调</span><br><span class=\"line\">\t\t\t    resolve(res.data);</span><br><span class=\"line\">\t\t\t&#125;, 1000);</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">            &#125;else &#123;  //其它code 返回提示</span><br><span class=\"line\">                uni.showToast(&#123;</span><br><span class=\"line\">                    title:res.data.msg,</span><br><span class=\"line\">                    image:&#x27;../../static/public/close.png&#x27;,</span><br><span class=\"line\">                    duration: 2000,</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).catch(error =&gt; &#123;</span><br><span class=\"line\">            uni.hideLoading();</span><br><span class=\"line\">            uni.stopPullDownRefresh();</span><br><span class=\"line\">            let [err, res] = error;</span><br><span class=\"line\">            reject(err)</span><br><span class=\"line\">\t\t\tconsole.log(error ,&#x27;请求返回error&#x27;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">//定义对象</span><br><span class=\"line\">var api = &#123;</span><br><span class=\"line\">\trequest</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\">export default api</span><br></pre></td></tr></table></figure>\n<p>这里我是把 token 加到了请求头里</p>\n<h3 id=\"2-在-mainjs-中引入-定义\"><a class=\"markdownIt-Anchor\" href=\"#2-在-mainjs-中引入-定义\">#</a> 2、在 main.js 中引入、定义</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import request from &#x27;common/request.js&#x27;  //引入封装全局</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">Vue.prototype.$api = request  </span><br></pre></td></tr></table></figure>\n<h3 id=\"3-实际使用\"><a class=\"markdownIt-Anchor\" href=\"#3-实际使用\">#</a> 3、实际使用</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">this.$api.request(&#x27;getBookingList&#x27;, </span><br><span class=\"line\">\t\t&#123;time: &#x27;2021-11-10&#x27;&#125;, </span><br><span class=\"line\">\t\t&#x27;post&#x27;).then((res) =&gt; &#123;</span><br><span class=\"line\">\tconsole.log(res, &#x27;res----&#x27;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "前端"
            ]
        },
        {
            "id": "http://miemiefeng.github.io/layui%E5%BC%95%E5%85%A5%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%EF%BC%8C%E7%82%B9%E5%87%BB%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE/",
            "url": "http://miemiefeng.github.io/layui%E5%BC%95%E5%85%A5%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%EF%BC%8C%E7%82%B9%E5%87%BB%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE/",
            "title": "layui引入百度地图，点击获取当前位置",
            "date_published": "2021-11-11T02:26:19.000Z",
            "content_html": "<h5 id=\"一-申请百度地图的ak略\"><a class=\"markdownIt-Anchor\" href=\"#一-申请百度地图的ak略\">#</a> 一、申请百度地图的 ak（略）</h5>\n<h5 id=\"二-引入百度地图\"><a class=\"markdownIt-Anchor\" href=\"#二-引入百度地图\">#</a> 二、引入百度地图</h5>\n<p class=\"note note-primary\">先插入代码，分块讲解</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span> <span class=\"attr\">xmlns:th</span>=<span class=\"string\">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">th:block</span> <span class=\"attr\">th:include</span>=<span class=\"string\">&quot;include :: header(&#x27;服务网点管理修改&#x27;)&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">src</span>=<span class=\"string\">&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=自己申请&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--百度地图key要自己注册,或者用1.4以下的版本(不需要key)--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">th:object</span>=<span class=\"string\">&quot;$&#123;ServiceNetwork&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mainBox&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;main-container&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;main-container&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;display:none;&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>id<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;*&#123;id&#125;&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;电站编号&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                               <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>服务网点名称<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;*&#123;serviceName&#125;&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;serviceName&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                               <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;服务网点名称&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>服务网点地址<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:697px;height:550px;border:#ccc solid 1px;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dituContent&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;*&#123;serviceAddress&#125;&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;serviceAddress&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                               <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;服务网点地址&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>营业时间<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;*&#123;businessHours&#125;&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;businessHours&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                               <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;营业时间&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>营运状态 <span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">th:field</span>=<span class=\"string\">&quot;*&#123;operatingStatus&#125;&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;operatingStatus&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;operatingStatus&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                                <span class=\"attr\">th:with</span>=<span class=\"string\">&quot;type=$&#123;@dict.getType(&#x27;operating_status&#x27;)&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">                            <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">th:each</span>=<span class=\"string\">&quot;dict : $&#123;type&#125;&quot;</span> <span class=\"attr\">th:text</span>=<span class=\"string\">&quot;$&#123;dict.dictLabel&#125;&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                                    <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;$&#123;dict.dictValue&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>服务网点状态<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">th:field</span>=<span class=\"string\">&quot;*&#123;serviceStatus&#125;&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;serviceStatus&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;serviceStatus&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                                <span class=\"attr\">th:with</span>=<span class=\"string\">&quot;type=$&#123;@dict.getType(&#x27;serviceStatus&#x27;)&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">                            <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">th:each</span>=<span class=\"string\">&quot;dict : $&#123;type&#125;&quot;</span> <span class=\"attr\">th:text</span>=<span class=\"string\">&quot;$&#123;dict.dictLabel&#125;&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                                    <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;$&#123;dict.dictValue&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>电柜容量<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;*&#123;electricCabinetCapacity&#125;&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;electricCabinetCapacity&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                               <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;电柜容量&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>电柜数量<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;*&#123;numberElectricCabinets&#125;&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;numberElectricCabinets&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                               <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;电柜数量&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>电池数据<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;*&#123;batteryData&#125;&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;batteryData&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                               <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;电池数据&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bottom&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;button-container&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-btn layui-btn-normal layui-btn-sm&quot;</span> <span class=\"attr\">lay-submit</span>=<span class=\"string\">&quot;&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">lay-filter</span>=<span class=\"string\">&quot;serviceNetwork-update&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-icon layui-icon-ok&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">                提交</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;reset&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-btn layui-btn-primary layui-btn-sm&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-icon layui-icon-refresh&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">                重置</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">th:block</span> <span class=\"attr\">th:include</span>=<span class=\"string\">&quot;include :: footer&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//创建和初始化地图函数：</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">function</span> <span class=\"title function_\">initMap</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">createMap</span>();<span class=\"comment\">//创建地图</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">setMapEvent</span>();<span class=\"comment\">//设置地图事件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">addMapControl</span>();<span class=\"comment\">//向地图添加控件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//创建地图函数：</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">function</span> <span class=\"title function_\">createMap</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> map = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Map</span>(<span class=\"string\">&quot;dituContent&quot;</span>);<span class=\"comment\">//在百度地图容器中创建一个地图</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> point = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Point</span>(<span class=\"number\">106.61680</span>, <span class=\"number\">29.57793</span>);<span class=\"comment\">//定义一个中心点坐标(当前坐标重庆)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">centerAndZoom</span>(point, <span class=\"number\">12</span>);<span class=\"comment\">//设定地图的中心点和坐标并将地图显示在地图容器中</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">window</span>.<span class=\"property\">map</span> = map;<span class=\"comment\">//将map变量存储在全局</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//地图事件设置函数：</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">function</span> <span class=\"title function_\">setMapEvent</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">enableDragging</span>();<span class=\"comment\">//启用地图拖拽事件，默认启用(可不写)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">enableScrollWheelZoom</span>();<span class=\"comment\">//启用地图滚轮放大缩小</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">enableDoubleClickZoom</span>();<span class=\"comment\">//启用鼠标双击放大，默认启用(可不写)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">enableKeyboard</span>();<span class=\"comment\">//启用键盘上下左右键移动地图</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(e)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">var</span> point = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Point</span>(e.<span class=\"property\">Ag</span>.<span class=\"property\">lng</span>, e.<span class=\"property\">Ag</span>.<span class=\"property\">lat</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">var</span> gc = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Geocoder</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">            gc.<span class=\"title function_\">getLocation</span>(point, <span class=\"keyword\">function</span> (<span class=\"params\">rs</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                $(<span class=\"string\">&quot;input[name=&#x27;serviceAddress&#x27;]&quot;</span>).<span class=\"title function_\">val</span>(rs.<span class=\"property\">address</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(rs.<span class=\"property\">address</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">var</span> opts = &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"attr\">title</span>: <span class=\"string\">&#x27;行政区划归属&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"attr\">width</span>: <span class=\"number\">220</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"attr\">height</span>: <span class=\"number\">92</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">var</span> infoStr = <span class=\"string\">&#x27;&lt;div&gt;省：&#x27;</span> + rs.<span class=\"property\">addressComponents</span>.<span class=\"property\">province</span> + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                    + <span class=\"string\">&#x27;&lt;div&gt;市：&#x27;</span> + rs.<span class=\"property\">addressComponents</span>.<span class=\"property\">city</span> + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                    + <span class=\"string\">&#x27;&lt;div&gt;区：&#x27;</span> + rs.<span class=\"property\">addressComponents</span>.<span class=\"property\">district</span> + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">var</span> infoWindow = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">InfoWindow</span>(infoStr, opts);</span></span><br><span class=\"line\"><span class=\"language-javascript\">                map.<span class=\"title function_\">openInfoWindow</span>(infoWindow, point);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//地图控件添加函数：</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">function</span> <span class=\"title function_\">addMapControl</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//向地图中添加缩放控件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> ctrl_nav = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">NavigationControl</span>(&#123;<span class=\"attr\">anchor</span>: <span class=\"variable constant_\">BMAP_ANCHOR_TOP_LEFT</span>, <span class=\"attr\">type</span>: <span class=\"variable constant_\">BMAP_NAVIGATION_CONTROL_LARGE</span>&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">addControl</span>(ctrl_nav);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//向地图中添加缩略图控件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> ctrl_ove = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">OverviewMapControl</span>(&#123;<span class=\"attr\">anchor</span>: <span class=\"variable constant_\">BMAP_ANCHOR_BOTTOM_RIGHT</span>, <span class=\"attr\">isOpen</span>: <span class=\"number\">1</span>&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">addControl</span>(ctrl_ove);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//向地图中添加比例尺控件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> ctrl_sca = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">ScaleControl</span>(&#123;<span class=\"attr\">anchor</span>: <span class=\"variable constant_\">BMAP_ANCHOR_BOTTOM_LEFT</span>&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">addControl</span>(ctrl_sca);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">initMap</span>();<span class=\"comment\">//创建和初始化地图</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    layui.<span class=\"title function_\">use</span>([<span class=\"string\">&#x27;form&#x27;</span>, <span class=\"string\">&#x27;laydate&#x27;</span>, <span class=\"string\">&#x27;jquery&#x27;</span>], <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> form = layui.<span class=\"property\">form</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> $ = layui.<span class=\"property\">jquery</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> <span class=\"variable constant_\">MODULE_PATH</span> = rootPath + <span class=\"string\">&quot;/ServiceNetworkController&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        form.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;submit(serviceNetwork-update)&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">data</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">let</span> loader = layer.<span class=\"title function_\">load</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">            $.<span class=\"title function_\">ajax</span>(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"attr\">url</span>: <span class=\"variable constant_\">MODULE_PATH</span> + <span class=\"string\">&#x27;/edit&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"attr\">data</span>: data.<span class=\"property\">field</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"attr\">dataType</span>: <span class=\"string\">&#x27;json&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"attr\">contentType</span>: <span class=\"string\">&#x27;application/x-www-form-urlencoded&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"attr\">type</span>: <span class=\"string\">&#x27;post&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"attr\">success</span>: <span class=\"keyword\">function</span> (<span class=\"params\">result</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"keyword\">if</span> (result.<span class=\"property\">code</span> == <span class=\"number\">200</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                        layer.<span class=\"title function_\">msg</span>(result.<span class=\"property\">msg</span>, &#123;<span class=\"attr\">icon</span>: <span class=\"number\">1</span>, <span class=\"attr\">time</span>: <span class=\"number\">1000</span>&#125;, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                            parent.<span class=\"property\">layer</span>.<span class=\"title function_\">close</span>(parent.<span class=\"property\">layer</span>.<span class=\"title function_\">getFrameIndex</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">name</span>));<span class=\"comment\">//关闭当前页</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                            parent.<span class=\"property\">layui</span>.<span class=\"property\">table</span>.<span class=\"title function_\">reload</span>(<span class=\"string\">&quot;serviceNetwork-table&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">                            layer.<span class=\"title function_\">close</span>(loader);</span></span><br><span class=\"line\"><span class=\"language-javascript\">                        &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                        layer.<span class=\"title function_\">msg</span>(result.<span class=\"property\">msg</span>, &#123;<span class=\"attr\">icon</span>: <span class=\"number\">2</span>, <span class=\"attr\">time</span>: <span class=\"number\">1000</span>&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">                        layer.<span class=\"title function_\">close</span>(loader);</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"1引入地图ak需要自己申请\"><a class=\"markdownIt-Anchor\" href=\"#1引入地图ak需要自己申请\">#</a> 1. 引入地图 (ak 需要自己申请)</h6>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=ak需要自己申请&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"2将地图div放置在合适的地方\"><a class=\"markdownIt-Anchor\" href=\"#2将地图div放置在合适的地方\">#</a> 2. 将地图 div 放置在合适的地方</h6>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-form-label&quot;</span>&gt;</span>服务网点地址<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:697px;height:550px;border:#ccc solid 1px;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dituContent&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">th:value</span>=<span class=\"string\">&quot;*&#123;serviceAddress&#125;&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;serviceAddress&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">               <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;服务网点地址&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-input&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>3. 设置地图相关函数</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//创建和初始化地图函数：</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">function</span> <span class=\"title function_\">initMap</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">createMap</span>();<span class=\"comment\">//创建地图</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">setMapEvent</span>();<span class=\"comment\">//设置地图事件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">addMapControl</span>();<span class=\"comment\">//向地图添加控件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//创建地图函数：</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">function</span> <span class=\"title function_\">createMap</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> map = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Map</span>(<span class=\"string\">&quot;dituContent&quot;</span>);<span class=\"comment\">//在百度地图容器中创建一个地图</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> point = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Point</span>(<span class=\"number\">106.61680</span>, <span class=\"number\">29.57793</span>);<span class=\"comment\">//定义一个中心点坐标(当前坐标重庆)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">centerAndZoom</span>(point, <span class=\"number\">12</span>);<span class=\"comment\">//设定地图的中心点和坐标并将地图显示在地图容器中</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">window</span>.<span class=\"property\">map</span> = map;<span class=\"comment\">//将map变量存储在全局</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//地图事件设置函数：</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">function</span> <span class=\"title function_\">setMapEvent</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">enableDragging</span>();<span class=\"comment\">//启用地图拖拽事件，默认启用(可不写)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">enableScrollWheelZoom</span>();<span class=\"comment\">//启用地图滚轮放大缩小</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">enableDoubleClickZoom</span>();<span class=\"comment\">//启用鼠标双击放大，默认启用(可不写)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">enableKeyboard</span>();<span class=\"comment\">//启用键盘上下左右键移动地图</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(e)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">var</span> point = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Point</span>(e.<span class=\"property\">Ag</span>.<span class=\"property\">lng</span>, e.<span class=\"property\">Ag</span>.<span class=\"property\">lat</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">var</span> gc = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Geocoder</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">            gc.<span class=\"title function_\">getLocation</span>(point, <span class=\"keyword\">function</span> (<span class=\"params\">rs</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                $(<span class=\"string\">&quot;input[name=&#x27;serviceAddress&#x27;]&quot;</span>).<span class=\"title function_\">val</span>(rs.<span class=\"property\">address</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(rs.<span class=\"property\">address</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">var</span> opts = &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"attr\">title</span>: <span class=\"string\">&#x27;行政区划归属&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"attr\">width</span>: <span class=\"number\">220</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"attr\">height</span>: <span class=\"number\">92</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">var</span> infoStr = <span class=\"string\">&#x27;&lt;div&gt;省：&#x27;</span> + rs.<span class=\"property\">addressComponents</span>.<span class=\"property\">province</span> + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                    + <span class=\"string\">&#x27;&lt;div&gt;市：&#x27;</span> + rs.<span class=\"property\">addressComponents</span>.<span class=\"property\">city</span> + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                    + <span class=\"string\">&#x27;&lt;div&gt;区：&#x27;</span> + rs.<span class=\"property\">addressComponents</span>.<span class=\"property\">district</span> + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">var</span> infoWindow = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">InfoWindow</span>(infoStr, opts);</span></span><br><span class=\"line\"><span class=\"language-javascript\">                map.<span class=\"title function_\">openInfoWindow</span>(infoWindow, point);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//地图控件添加函数：</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">function</span> <span class=\"title function_\">addMapControl</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//向地图中添加缩放控件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> ctrl_nav = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">NavigationControl</span>(&#123;<span class=\"attr\">anchor</span>: <span class=\"variable constant_\">BMAP_ANCHOR_TOP_LEFT</span>, <span class=\"attr\">type</span>: <span class=\"variable constant_\">BMAP_NAVIGATION_CONTROL_LARGE</span>&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">addControl</span>(ctrl_nav);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//向地图中添加缩略图控件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> ctrl_ove = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">OverviewMapControl</span>(&#123;<span class=\"attr\">anchor</span>: <span class=\"variable constant_\">BMAP_ANCHOR_BOTTOM_RIGHT</span>, <span class=\"attr\">isOpen</span>: <span class=\"number\">1</span>&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">addControl</span>(ctrl_ove);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//向地图中添加比例尺控件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> ctrl_sca = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">ScaleControl</span>(&#123;<span class=\"attr\">anchor</span>: <span class=\"variable constant_\">BMAP_ANCHOR_BOTTOM_LEFT</span>&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        map.<span class=\"title function_\">addControl</span>(ctrl_sca);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">initMap</span>();<span class=\"comment\">//创建和初始化地图</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"三-地图函数\"><a class=\"markdownIt-Anchor\" href=\"#三-地图函数\">#</a> 三、地图函数</h5>\n<p class=\"note note-primary\">以下为点击并获取当前地址名称</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//地图事件设置函数：</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">setMapEvent</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    map.<span class=\"title function_\">enableDragging</span>();<span class=\"comment\">//启用地图拖拽事件，默认启用(可不写)</span></span><br><span class=\"line\">    map.<span class=\"title function_\">enableScrollWheelZoom</span>();<span class=\"comment\">//启用地图滚轮放大缩小</span></span><br><span class=\"line\">    map.<span class=\"title function_\">enableDoubleClickZoom</span>();<span class=\"comment\">//启用鼠标双击放大，默认启用(可不写)</span></span><br><span class=\"line\">    map.<span class=\"title function_\">enableKeyboard</span>();<span class=\"comment\">//启用键盘上下左右键移动地图</span></span><br><span class=\"line\">    map.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(e)</span><br><span class=\"line\">        <span class=\"keyword\">var</span> point = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Point</span>(e.<span class=\"property\">Ag</span>.<span class=\"property\">lng</span>, e.<span class=\"property\">Ag</span>.<span class=\"property\">lat</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> gc = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">Geocoder</span>();</span><br><span class=\"line\">        gc.<span class=\"title function_\">getLocation</span>(point, <span class=\"keyword\">function</span> (<span class=\"params\">rs</span>) &#123;</span><br><span class=\"line\">            $(<span class=\"string\">&quot;input[name=&#x27;serviceAddress&#x27;]&quot;</span>).<span class=\"title function_\">val</span>(rs.<span class=\"property\">address</span>);</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(rs.<span class=\"property\">address</span>)</span><br><span class=\"line\">            <span class=\"keyword\">var</span> opts = &#123;</span><br><span class=\"line\">                <span class=\"attr\">title</span>: <span class=\"string\">&#x27;行政区划归属&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">width</span>: <span class=\"number\">220</span>,</span><br><span class=\"line\">                <span class=\"attr\">height</span>: <span class=\"number\">92</span></span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> infoStr = <span class=\"string\">&#x27;&lt;div&gt;省：&#x27;</span> + rs.<span class=\"property\">addressComponents</span>.<span class=\"property\">province</span> + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span></span><br><span class=\"line\">                + <span class=\"string\">&#x27;&lt;div&gt;市：&#x27;</span> + rs.<span class=\"property\">addressComponents</span>.<span class=\"property\">city</span> + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span></span><br><span class=\"line\">                + <span class=\"string\">&#x27;&lt;div&gt;区：&#x27;</span> + rs.<span class=\"property\">addressComponents</span>.<span class=\"property\">district</span> + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> infoWindow = <span class=\"keyword\">new</span> <span class=\"title class_\">BMap</span>.<span class=\"title class_\">InfoWindow</span>(infoStr, opts);</span><br><span class=\"line\">            map.<span class=\"title function_\">openInfoWindow</span>(infoWindow, point);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中 <code>$(&quot;input[name='serviceAddress']&quot;).val(rs.address);</code>  赋值给 input 框</p>\n<p>三、成果<br>\n<img data-src=\"https://cdn.jsdelivr.net/gh/miemieFeng/blogImg/Blogs/20221116201128.png\" alt=\"20221116201128\"></p>\n",
            "tags": [
                "前端"
            ]
        }
    ]
}